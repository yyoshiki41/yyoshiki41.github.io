---
layout: post
title: Redis is single-threaded
---

タイトルの通りなのですが、Redisはイベントドリブンアーキテクチャで動作し、

シングルスレッドでリクエストを処理する。

故に、マルチコアでのスケールはしない。

CPUメトリクスをみる際には、それを考慮する必要がある。

AWSのようなホスティングサービス(Elasticache)のRedisを用いる場合は、 `100(%) / CPU数` でCPUリソースを使い切っていないかをみる必要がある。

(例えば、CPUコア数:8 なら、CPUトータルの使用率はMaxでも `100(%) / 8 = 12.5(%)` までしか使えないことになる。)

もちろんRedisのパフォーマンスで、CPUバウンスになるケースは少ないというのが一般的である。

余談ですが、マルチコアでCPUリソースを使いきろうと考えるなら、同一ホスト内でRedisを複数台立てることが挙げられる。
